<!doctype html>
<html lang="az">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LiderlÉ™r</title>
<style>
body { margin:0; background:#0f0f0f; font-family:Arial,sans-serif; color:white; }
.container { padding:15px; padding-bottom:120px; }
.header-box { background:#1a1a1a; border-radius:20px; padding:25px; text-align:center; margin-bottom:20px; }
.header-title { font-size:28px; font-weight:700; }
.header-sub { color:#b4b4b4; margin-top:6px; font-size:14px; }
.user-count { background:#ff2e2e; display:inline-block; padding:10px 20px; border-radius:50px; margin-top:15px; font-weight:600; }
.tabs { display:flex; gap:12px; margin-bottom:20px; }
.tab { flex:1; padding:12px; border-radius:12px; text-align:center; font-weight:600; font-size:15px; background:#181818; border:1px solid #333; }
.tab.active { background:#ff2e2e; border:none; }
.leaderboard { background:#1a1a1a; border-radius:20px; padding:20px; }
.user-row { display:flex; align-items:center; padding:12px 0; border-bottom:1px solid #2c2c2c; }
.user-row:last-child { border-bottom:none; }
.rank { font-size:20px; width:40px; text-align:center; font-weight:700; }
.rank.yellow { color:#ffd700; }
.rank.gray { color:#c9c9c9; }
.rank.bronze { color:#e2862b; }
.rank.red { color:#ff3d3d; }
.avatar { width:45px; height:45px; overflow:hidden; border-radius:50%; margin-right:12px; }
.avatar img { width:100%; height:100%; object-fit:cover; }
.username { flex:1; font-size:15px; font-weight:500; }
.score { color:#ff3d3d; font-weight:700; }
.bottom-nav { position:fixed; bottom:0; left:0; width:100%; background:#1a1a1a; display:flex; justify-content:space-evenly; padding:14px 0; border-top:1px solid #333; box-sizing:border-box; z-index:999; gap:2px; }
.nav-item { flex:1; text-align:center; font-size:14px; color:#bbb; cursor:pointer; padding:8px 0; }
.nav-item.active { color:#ff3d3d; font-weight:bold; }
.nav-item br { line-height:1.1; }
</style>
</head>
<body>
<div class="container">
    <div class="header-box">
        <div class="header-title">LiderlÉ™r</div>
        <div class="header-sub">Æn yaxÅŸÄ± oyunÃ§ularÄ± gÃ¶rÃ¼n vÉ™ onlarla yarÄ±ÅŸÄ±n</div>
        <div class="user-count" id="userCount">Ãœmumi istifadÉ™Ã§ilÉ™r: 0</div>
    </div>

    <div class="tabs">
        <div class="tab active">Balans LiderlÉ™ri</div>
        <div class="tab">Dost LiderlÉ™ri</div>
    </div>

    <div class="leaderboard" id="leaderboard">
        <!-- Ä°stifadÉ™Ã§ilÉ™r buraya É™lavÉ™ olunacaq -->
    </div>
</div>

<div class="bottom-nav">
    <div class="nav-item" onclick="window.location.href='home.html'">ğŸ <br>Ev</div>
    <div class="nav-item" onclick="window.location.href='tasks.html'">ğŸ“<br>TapÅŸÄ±rÄ±qlar</div>
    <div class="nav-item" onclick="window.location.href='leaders.html'">ğŸ“ˆ<br>LiderlÉ™r</div>
    <div class="nav-item" onclick="window.location.href='friends.html'">ğŸ‘¥<br>Dostlar</div>
    <div class="nav-item" onclick="window.location.href='withdraw.html'">ğŸ’²<br>Ã‡Ä±xarÄ±ÅŸ</div>
</div>

<script>
// Alt menyuda aktiv dÃ¼ymÉ™ni seÃ§ir
const navItems = document.querySelectorAll(".nav-item");
const currentPage = window.location.pathname.split("/").pop();
navItems.forEach(item => {
    const onclickAttr = item.getAttribute("onclick");
    if (!onclickAttr) return;
    const href = onclickAttr.match(/'(.+?)'/)[1];
    if (href === currentPage) item.classList.add("active");
});

// LocalStorage-dan istifadÉ™Ã§ilÉ™ri gÃ¶tÃ¼r
let users = JSON.parse(localStorage.getItem("users")) || [];

// BalansÄ± "m" vÉ™ "k" ilÉ™ olan string-dÉ™n rÉ™qÉ™mÉ™ Ã§evir
function parseScore(scoreStr) {
    if (!scoreStr) return 0;
    scoreStr = scoreStr.toLowerCase().replace(/,/g, "");
    if (scoreStr.endsWith("m")) return parseFloat(scoreStr) * 1000;
    if (scoreStr.endsWith("k")) return parseFloat(scoreStr);
    return parseFloat(scoreStr);
}

// Balansa gÃ¶rÉ™ sÄ±rala
users.sort((a, b) => parseScore(b.score) - parseScore(a.score));

const leaderboard = document.getElementById("leaderboard");
document.getElementById("userCount").textContent = `Ãœmumi istifadÉ™Ã§ilÉ™r: ${users.length}`;
leaderboard.innerHTML = "";

// Leaderboard-a É™lavÉ™ et
users.forEach((user, index)=>{
    const userRow = document.createElement("div");
    userRow.classList.add("user-row");

    let rankClass = "red";
    if (index === 0) rankClass = "yellow";
    else if (index === 1) rankClass = "gray";
    else if (index === 2) rankClass = "bronze";

    userRow.innerHTML = `
        <div class="rank ${rankClass}">#${index+1}</div>
        <div class="avatar"><img src="${user.avatar}" alt="avatar"></div>
        <div class="username">${user.name}</div>
        <div class="score">${user.score}</div>
    `;
    leaderboard.appendChild(userRow);
});
</script>
</body>
</html>
