<!DOCTYPE html>
<html lang="az">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ã‡Ä±xarÄ±ÅŸ</title>

<style>
    body{
        margin:0;
        background:#0d0d0d;
        font-family: Arial, sans-serif;
        color:white;
    }

    .container{
        padding:20px;
        padding-bottom:120px;
    }

    .card{
        background:#1a1a1a;
        padding:20px;
        border-radius:18px;
        margin-bottom:18px;
        box-shadow:0 0 10px rgba(0,0,0,0.4);
    }

    .balance{
        font-size:32px;
        font-weight:bold;
    }

    .sub{
        opacity:0.6;
        font-size:14px;
    }

    .input-box{
        margin-top:12px;
        background:#111;
        border-radius:14px;
        padding:14px;
        font-size:16px;
        color:#ccc;
    }

    .input-real{
        width:100%;
        background:none;
        border:none;
        outline:none;
        font-size:18px;
        color:white;
    }

    .method-grid{
        display:grid;
        grid-template-columns: repeat(2, 1fr);
        gap:12px;
        margin-top:15px;
    }

    .method{
        background:#111;
        padding:18px;
        border-radius:16px;
        text-align:center;
        font-size:18px;
        cursor:pointer;
        border:2px solid transparent;
    }

    .method.selected{
        border-color:#0f0;
    }

    .emoji{
        font-size:32px;
        display:block;
        margin-bottom:4px;
    }

    .green-box{
        background:#0f2c0f;
        padding:16px;
        border-radius:16px;
        margin-top:15px;
        line-height:24px;
    }

    .bold{
        font-weight:bold;
    }

    .btn{
        margin-top:18px;
        background:#d82323;
        padding:16px;
        border-radius:18px;
        text-align:center;
        font-size:20px;
        font-weight:bold;
        cursor:pointer;
    }

    .history-card{
        background:#1a1a1a;
        padding:20px;
        margin-top:25px;
        border-radius:18px;
        text-align:center;
        box-shadow:0 0 10px rgba(0,0,0,0.4);
    }

    .dynamic-input-box{
        margin-top:15px;
    }

    .bottom-nav {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        background: #1a1a1a;
        display: flex;
        justify-content: space-evenly;
        padding: 14px 0;
        border-top: 1px solid #333;
        z-index: 999;
        gap: 2px;
    }

    .nav-item {
        flex: 1;
        text-align: center;
        font-size: 14px;
        color: #bbb;
        cursor: pointer;
        padding: 8px 0;
    }

    .nav-item.active {
        color: #ff3d3d;
        font-weight: bold;
    }
</style>
</head>
<body>

<div class="container">

    <!-- Balans -->
    <div class="card">
        <div class="sub">MÃ¶vcud balans</div>
        <div class="balance" id="balanceValue">10.000 â‚¼</div>
        <div class="sub">â‰ˆ $0.000</div>
    </div>

    <!-- Ã‡Ä±xarÄ±ÅŸ -->
    <div class="card">
        <div class="sub">Ã‡Ä±xarÄ±ÅŸ mÉ™blÉ™ÄŸi</div>

        <div class="input-box">
            <input type="number" id="withdrawAmount" class="input-real" placeholder="Minimum Ã§Ä±xarÄ±ÅŸ: 3 â‚¼" min="3">
        </div>

        <div style="margin-top:18px; font-weight:bold;">Ã–dÉ™niÅŸ Ã¼sulunu seÃ§in</div>

        <div class="method-grid">
            <div class="method" data-type="phone"><span class="emoji">ğŸ”Ÿ</span>M10</div>
            <div class="method" data-type="bank"><span class="emoji">ğŸ¦</span>Bank</div>
            <div class="method" data-type="phone"><span class="emoji">ğŸ“±</span>Nar</div>
            <div class="method" data-type="phone"><span class="emoji">ğŸ“¶</span>Bakcell</div>
            <div class="method" data-type="phone"><span class="emoji">ğŸ“¡</span>Azercell</div>
        </div>

        <div class="green-box">
            Komissiya: <span class="bold">0%</span><br>
            Emal mÃ¼ddÉ™ti: <span class="bold">24 saat É™rzindÉ™</span>
        </div>

        <div class="dynamic-input-box" id="dynamicInputContainer"></div>

        <div class="btn" id="sendBtn">SorÄŸu gÃ¶ndÉ™r</div>
    </div>

    <!-- TarixÃ§É™ -->
    <div class="history-card">
        <div style="font-weight:bold; font-size:20px;">Ã‡Ä±xarÄ±ÅŸ tarixÃ§É™si</div>
        <div id="historyList" style="opacity:0.6; margin-top:10px;">Ã‡Ä±xarÄ±ÅŸ tarixÃ§É™si yoxdur</div>
    </div>

</div>

<!-- Bottom Nav -->
<div class="bottom-nav">
    <div class="nav-item" onclick="window.location.href='home.html'">ğŸ <br>Ev</div>
    <div class="nav-item" onclick="window.location.href='tasks.html'">ğŸ“<br>TapÅŸÄ±rÄ±qlar</div>
    <div class="nav-item active" onclick="window.location.href='withdraw.html'">ğŸ’²<br>Ã‡Ä±xarÄ±ÅŸ</div>
</div>

<script>
let balance = 10; // test Ã¼Ã§Ã¼n default balans
let selectedMethod = null;

const methods = document.querySelectorAll(".method");
const dynamicContainer = document.getElementById("dynamicInputContainer");
const withdrawInput = document.getElementById("withdrawAmount");
const historyList = document.getElementById("historyList");
const sendBtn = document.getElementById("sendBtn");

methods.forEach(method => {
    method.addEventListener("click", () => {
        // remove previous selection
        methods.forEach(m => m.classList.remove("selected"));
        method.classList.add("selected");
        selectedMethod = method;

        // create dynamic input
        dynamicContainer.innerHTML = "";
        const inputBox = document.createElement("div");
        inputBox.classList.add("input-box");
        const inputField = document.createElement("input");
        inputField.type = "number";
        inputField.classList.add("input-real");
        inputField.placeholder = (method.dataset.type === "phone") ? "NÃ¶mrÉ™ daxil edin" : "Bank kartÄ±nÄ± daxil edin";
        inputBox.appendChild(inputField);
        dynamicContainer.appendChild(inputBox);
    });
});

sendBtn.addEventListener("click", () => {
    const amount = parseFloat(withdrawInput.value);
    if (!selectedMethod) {
        alert("Ã–dÉ™niÅŸ Ã¼sulunu seÃ§in");
        return;
    }
    if (isNaN(amount) || amount < 3) {
        alert("Minimum Ã§Ä±xarÄ±ÅŸ 3 â‚¼ olmalÄ±dÄ±r");
        return;
    }
    if (amount > balance) {
        alert("Balans kifayÉ™t etmir");
        return;
    }

    const inputValue = dynamicContainer.querySelector(".input-real").value.trim();
    if (inputValue === "") {
        alert("ZÉ™hmÉ™t olmasa mÉ™lumatÄ± daxil edin");
        return;
    }

    // update balance
    balance -= amount;
    document.getElementById("balanceValue").textContent = balance.toFixed(3) + " â‚¼";

    // add to history
    const historyItem = document.createElement("div");
    historyItem.style.marginTop = "10px";
    historyItem.textContent = `${selectedMethod.textContent} Ã¼Ã§Ã¼n Ã§Ä±xarÄ±ÅŸ: ${amount.toFixed(2)} â‚¼ â€” GÃ¶zlÉ™mÉ™dÉ™...`;
    historyList.appendChild(historyItem);

    // simulate success after 2 hours (for demo use 10 sec)
    if (balance >= 3) {
        setTimeout(() => {
            historyItem.textContent = `${selectedMethod.textContent} Ã¼Ã§Ã¼n Ã§Ä±xarÄ±ÅŸ: ${amount.toFixed(2)} â‚¼ â€” UÄŸurlu âœ…`;
        }, 10000); // demo Ã¼Ã§Ã¼n 10 saniyÉ™ É™vÉ™zinÉ™ 2 saat ola bilÉ™r: 7200000
    } else {
        // balans azdÄ±rsa 10 saniyÉ™ sonra uÄŸursuz
        setTimeout(() => {
            historyItem.textContent = `${selectedMethod.textContent} Ã¼Ã§Ã¼n Ã§Ä±xarÄ±ÅŸ: ${amount.toFixed(2)} â‚¼ â€” UÄŸursuz âŒ`;
        }, 10000);
    }

    // reset inputs
    withdrawInput.value = "";
    dynamicContainer.innerHTML = "";
    methods.forEach(m => m.classList.remove("selected"));
    selectedMethod = null;
});
</script>

</body>
</html>
